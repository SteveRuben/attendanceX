import{c as v,j as e,a as c,B as l,X as _,U as P,D as U,y as H}from"./index-gm4XY7Dh.js";import{r as a}from"./vendor-CvUQ7FSA.js";import{C as n,a as d,b as F,c as X}from"./Card-ct0JxCCf.js";import{m as G,T as w}from"./mlService-CJ6D2i2K.js";import{C as y}from"./circle-alert-B-efKsjX.js";import{A as J}from"./arrow-right-BwqWpyzD.js";import{C as K}from"./circle-check-big-eEft8Q46.js";import{C as O}from"./clock-Tx-U9-MC.js";import{T as Q}from"./trending-up-CbsLnhxQ.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],j=v("lightbulb",V);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Y=v("sparkles",W),ne=({type:m,targetId:f,context:g,maxRecommendations:C=5,showPriority:k=!0,showActions:z=!0,onRecommendationApply:x,onRecommendationDismiss:o})=>{const[A,S]=a.useState([]),[I,N]=a.useState(!0),[b,h]=a.useState(null),[u,M]=a.useState(new Set),[r,T]=a.useState(new Set);a.useEffect(()=>{p()},[m,f,g]);const p=async()=>{try{N(!0),h(null);const s=await G.getRecommendations({type:m,targetId:f,context:g});s.success&&s.data?S(s.data.recommendations):h("Impossible de charger les recommandations")}catch(s){h(s.message||"Erreur lors du chargement"),console.error("Error loading recommendations:",s)}finally{N(!1)}},L=s=>{switch(s){case"high":return e.jsx(y,{className:"w-4 h-4 text-red-500"});case"medium":return e.jsx(O,{className:"w-4 h-4 text-yellow-500"});case"low":return e.jsx(K,{className:"w-4 h-4 text-green-500"});default:return e.jsx(j,{className:"w-4 h-4 text-blue-500"})}},q=s=>{switch(s){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";case"low":return"border-green-200 bg-green-50";default:return"border-blue-200 bg-blue-50"}},E=s=>{switch(s){case"scheduling":return e.jsx(U,{className:"w-4 h-4"});case"engagement":return e.jsx(P,{className:"w-4 h-4"});case"optimization":return e.jsx(Q,{className:"w-4 h-4"});case"communication":return e.jsx(w,{className:"w-4 h-4"});default:return e.jsx(j,{className:"w-4 h-4"})}},R=s=>s>=.8?"text-green-600":s>=.6?"text-yellow-600":"text-red-600",$=s=>{T(t=>new Set([...t,s.id])),x==null||x(s),H.success("Recommandation appliquée")},B=s=>{M(t=>new Set([...t,s])),o==null||o(s)},i=A.map((s,t)=>({id:`rec-${t}`,type:m,title:s.length>50?s.substring(0,50)+"...":s,description:s,confidence:.8+Math.random()*.2,priority:t===0?"high":t===1?"medium":"low",category:t%4===0?"scheduling":t%4===1?"engagement":t%4===2?"optimization":"communication",actionable:!0,action:{type:"implement",description:"Appliquer cette recommandation"},estimatedImpact:t===0?"Élevé":t===1?"Moyen":"Faible",timeToImplement:t===0?"5 min":t===1?"15 min":"30 min"})).filter(s=>!u.has(s.id)).slice(0,C);return I?e.jsx(n,{children:e.jsx(d,{className:"p-6 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):b?e.jsx(n,{children:e.jsxs(d,{className:"p-6 flex flex-col items-center justify-center",children:[e.jsx(y,{className:"w-8 h-8 text-red-500 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:b}),e.jsx(c,{variant:"outline",size:"sm",onClick:p,className:"mt-2",children:"Réessayer"})]})}):i.length===0?e.jsx(n,{children:e.jsxs(d,{className:"p-6 flex flex-col items-center justify-center",children:[e.jsx(Y,{className:"w-8 h-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Aucune recommandation disponible pour le moment"})]})}):e.jsxs(n,{children:[e.jsx(F,{className:"pb-3",children:e.jsxs(X,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"Recommandations IA"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"outline",className:"text-xs",children:[i.length," recommandation",i.length>1?"s":""]}),e.jsx(c,{variant:"outline",size:"sm",onClick:p,children:"Actualiser"})]})]})}),e.jsxs(d,{className:"space-y-4",children:[i.map(s=>e.jsxs("div",{className:`p-4 border rounded-lg ${q(s.priority)} ${r.has(s.id)?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[k&&L(s.priority),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[E(s.category),e.jsx("h4",{className:"font-medium text-sm",children:s.title})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>B(s.id),className:"h-6 w-6 p-0",children:e.jsx(_,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center space-x-4 mb-3 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Confiance:"}),e.jsxs("span",{className:`font-medium ${R(s.confidence)}`,children:[Math.round(s.confidence*100),"%"]})]}),s.estimatedImpact&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Impact:"}),e.jsx("span",{className:"font-medium",children:s.estimatedImpact})]}),s.timeToImplement&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Temps:"}),e.jsx("span",{className:"font-medium",children:s.timeToImplement})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(l,{variant:"outline",className:"text-xs capitalize",children:s.priority}),e.jsx(l,{variant:"secondary",className:"text-xs capitalize",children:s.category}),s.actionable&&e.jsx(l,{variant:"default",className:"text-xs",children:"Actionnable"}),r.has(s.id)&&e.jsx(l,{variant:"default",className:"text-xs bg-green-600",children:"✓ Appliquée"})]}),z&&s.actionable&&!r.has(s.id)&&e.jsxs("div",{className:"flex items-center justify-between",children:[s.action&&e.jsxs("div",{className:"flex items-center text-xs text-primary",children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:s.action.description})]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>$(s),className:"ml-auto",children:["Appliquer",e.jsx(J,{className:"w-3 h-3 ml-1"})]})]})]},s.id)),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t text-xs text-muted-foreground",children:[e.jsxs("span",{children:[r.size," appliquée",r.size>1?"s":"",", ",u.size," ignorée",u.size>1?"s":""]}),e.jsx("span",{children:"IA v2.0"})]})]})]})};export{j as L,ne as R,Y as S};
//# sourceMappingURL=RecommendationPanel-BRi5PorH.js.map
