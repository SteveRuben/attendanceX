import{w as T,j as e,a as S,S as k,x as E,L as ae,y as F}from"./index-gm4XY7Dh.js";import{r as i,L as p,d as te,u as re}from"./vendor-CvUQ7FSA.js";import{C as O,b as B,c as V,a as W}from"./Card-ct0JxCCf.js";import{I as u}from"./Input-BoijLIkg.js";import{L as c}from"./label-B3NocW4B.js";import{A as N,a as y}from"./alert-dbwOQxjT.js";import{M as w}from"./mail-Bm_S11fa.js";import{C as b}from"./circle-alert-B-efKsjX.js";import{C as L}from"./circle-check-big-eEft8Q46.js";import{C as ie}from"./clock-Tx-U9-MC.js";import{R as le}from"./refresh-cw-dQTnxzmC.js";import{A as Y}from"./arrow-right-BwqWpyzD.js";import{B as ne}from"./building-C4sNiXDP.js";import{L as q}from"./lock-DiOu4SZ2.js";import{E as $}from"./eye-off-C98bhrRg.js";import{E as I}from"./eye-2sExp-ov.js";import{C as ce}from"./check-Cx9i6ejF.js";import"./firebase-De9GV7Vy.js";const me=({registrationData:s})=>{const[m,f]=i.useState(!1),[j,o]=i.useState(!1),{resendEmailVerification:v}=T(),d=async()=>{try{f(!0),await v(s.data.email),o(!0),setTimeout(()=>o(!1),5e3)}catch{}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.data.verificationSent?e.jsx(w,{className:"text-green-600 w-6 h-6"}):e.jsx(b,{className:"text-yellow-600 w-6 h-6"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.data.verificationSent?"Check your email":"Account created"}),e.jsx("p",{className:"text-gray-600 mt-2",children:s.data.verificationSent?"We sent a verification link to your email":"There was an issue sending the verification email"})]}),e.jsxs(O,{className:"bg-white border-gray-200 shadow-sm",children:[e.jsx(B,{className:"space-y-1 pb-6",children:e.jsx(V,{className:"text-xl text-center text-gray-900",children:"Registration Complete"})}),e.jsxs(W,{className:"space-y-6",children:[e.jsxs(N,{className:s.data.verificationSent?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50",children:[s.data.verificationSent?e.jsx(L,{className:"h-4 w-4 text-green-600"}):e.jsx(b,{className:"h-4 w-4 text-yellow-600"}),e.jsx(y,{className:"text-gray-700",children:s.message})]}),s.warning&&e.jsxs(N,{variant:"destructive",className:"border-orange-200 bg-orange-50",children:[e.jsx(b,{className:"h-4 w-4 text-orange-600"}),e.jsx(y,{className:"text-orange-700",children:s.warning})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email sent to:"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.data.email})]})]}),s.data.expiresIn&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ie,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Link expires in:"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.data.expiresIn})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Next steps:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-900 text-white rounded-full flex items-center justify-center text-xs font-medium mt-0.5",children:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Check your email inbox (and spam folder)"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-900 text-white rounded-full flex items-center justify-center text-xs font-medium mt-0.5",children:"2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click the verification link in the email"})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-900 text-white rounded-full flex items-center justify-center text-xs font-medium mt-0.5",children:"3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Return here to sign in to your account"})]})]})]}),j&&e.jsxs(N,{className:"border-green-200 bg-green-50",children:[e.jsx(L,{className:"h-4 w-4 text-green-600"}),e.jsx(y,{className:"text-green-700",children:"Verification email sent successfully! Check your inbox."})]}),e.jsxs("div",{className:"space-y-3",children:[s.data.canResend&&e.jsxs(S,{onClick:d,disabled:m,variant:"outline",className:"w-full",children:[m?e.jsx(le,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(w,{className:"w-4 h-4 mr-2"}),m?"Sending...":"Resend verification email"]}),e.jsx(S,{asChild:!0,className:"w-full bg-gray-900 text-white hover:bg-gray-800",children:e.jsxs(p,{to:"/login",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Continue to sign in"]})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email?"," ",e.jsx("button",{onClick:d,disabled:m||!s.data.canResend,className:"text-gray-900 hover:underline font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Try resending it"})]})})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"Your account is secure and protected"})]})})]})})},ze=()=>{const[s,m]=i.useState({firstName:"",lastName:"",email:"",organization:"",password:"",confirmPassword:""}),[f,j]=i.useState(!1),[o,v]=i.useState(!1),[d,P]=i.useState(!1),[C,G]=i.useState(!1),[a,x]=i.useState({}),[n,M]=i.useState(0),[Z,H]=i.useState(!1),[z,J]=i.useState(null),{register:U,isAuthenticated:R}=T(),A=te();re(),i.useEffect(()=>{R&&A("/dashboard",{replace:!0})},[R,A]),i.useEffect(()=>{M((r=>{let l=0;return r.length>=6&&(l+=1),r.length>=8&&(l+=1),/[A-Z]/.test(r)&&(l+=1),/[0-9]/.test(r)&&(l+=1),/[^A-Za-z0-9]/.test(r)&&(l+=1),l})(s.password))},[s.password]);const X=()=>{const t={};return s.firstName.trim()||(t.firstName="First name is required"),s.lastName.trim()||(t.lastName="Last name is required"),s.email?/\S+@\S+\.\S+/.test(s.email)||(t.email="Please enter a valid email address"):t.email="Email is required",s.organization.trim()||(t.organization="Organization is required"),s.password?s.password.length<6&&(t.password="Password must be at least 6 characters"):t.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(t.confirmPassword="Passwords do not match"):t.confirmPassword="Please confirm your password",o||(t.terms="You must accept the terms and conditions"),x(t),Object.keys(t).length===0},K=async t=>{if(t.preventDefault(),!!X()){j(!0),x({});try{const r=await U({firstName:s.firstName,lastName:s.lastName,email:s.email,organization:s.organization,password:s.password,acceptTerms:o});J(r),H(!0),F.success(r.message),r.warning&&F.warn(r.warning)}catch(r){r.message.includes("Email already exists")?x({email:"An account with this email already exists"}):r.message.includes("Invalid email")?x({email:"Please enter a valid email address"}):x({general:r.message||"Registration failed. Please try again."})}finally{j(!1)}}},h=t=>{const{name:r,value:l}=t.target;m(g=>({...g,[r]:l})),a[r]&&x(g=>({...g,[r]:""}))},Q=()=>n<=1?"bg-red-500":n<=2?"bg-yellow-500":n<=3?"bg-blue-500":"bg-green-500",_=()=>n<=1?"Weak":n<=2?"Fair":n<=3?"Good":"Strong",D=({checked:t,onChange:r,id:l,className:g="",hasError:ee=!1})=>e.jsxs("div",{className:`relative ${g}`,children:[e.jsx("input",{type:"checkbox",id:l,checked:t,onChange:se=>r(se.target.checked),className:"sr-only"}),e.jsx("label",{htmlFor:l,className:`
            relative flex items-center justify-center w-5 h-5 
            border rounded-md cursor-pointer transition-all duration-200 ease-in-out
            ${t?"bg-gray-900 border-gray-900":ee?"bg-white border-red-300 hover:border-red-400":"bg-white border-gray-300 hover:border-gray-400"}
            focus-within:ring-2 focus-within:ring-gray-500 focus-within:ring-offset-2
          `,children:t&&e.jsx(ce,{className:"w-3 h-3 text-white transition-opacity duration-200 ease-in-out",strokeWidth:2.5})})]});return Z&&z?e.jsx(me,{registrationData:z}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsx(k,{className:"text-white w-6 h-6"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create account"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Get started with AttendanceX in seconds"})]}),e.jsxs(O,{className:"bg-white border-gray-200 shadow-sm",children:[e.jsx(B,{className:"space-y-1 pb-6",children:e.jsx(V,{className:"text-xl text-center text-gray-900",children:"Sign up"})}),e.jsxs(W,{children:[a.general&&e.jsxs(N,{className:"mb-4",variant:"destructive",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx(y,{children:a.general})]}),e.jsxs("form",{onSubmit:K,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"firstName",className:"text-sm font-medium text-gray-700 mb-2 block",children:"First name"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 pointer-events-none z-10"}),e.jsx(u,{id:"firstName",name:"firstName",type:"text",required:!0,value:s.firstName,onChange:h,className:`pl-10 w-full ${a.firstName?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"John"})]}),a.firstName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.firstName})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"lastName",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Last name"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 pointer-events-none z-10"}),e.jsx(u,{id:"lastName",name:"lastName",type:"text",required:!0,value:s.lastName,onChange:h,className:`pl-10 w-full ${a.lastName?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"Doe"})]}),a.lastName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lastName})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"email",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 pointer-events-none z-10"}),e.jsx(u,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:h,className:`pl-10 w-full ${a.email?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"john@company.com"})]}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"organization",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Organization"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 pointer-events-none z-10"}),e.jsx(u,{id:"organization",name:"organization",type:"text",required:!0,value:s.organization,onChange:h,className:`pl-10 w-full ${a.organization?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"Your Company"})]}),a.organization&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.organization}),s.organization.trim()&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(k,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"Organization Setup"}),e.jsxs("p",{className:"mt-1",children:['If "',s.organization,`" is a new organization, you'll automatically become the administrator. If it already exists, you'll join as a participant.`]})]})]})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"password",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 pointer-events-none z-10"}),e.jsx(u,{id:"password",name:"password",type:d?"text":"password",required:!0,value:s.password,onChange:h,className:`pl-10 pr-10 w-full ${a.password?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"At least 6 characters"}),e.jsx("button",{type:"button",onClick:()=>P(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 z-10",children:d?e.jsx($,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]}),s.password&&e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${Q()}`,style:{width:`${n/5*100}%`}})}),e.jsx("span",{className:"text-xs text-gray-600",children:_()})]})}),a.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Confirm password"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 pointer-events-none z-10"}),e.jsx(u,{id:"confirmPassword",name:"confirmPassword",type:C?"text":"password",required:!0,value:s.confirmPassword,onChange:h,className:`pl-10 pr-10 w-full ${a.confirmPassword?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"Confirm your password"}),e.jsx("button",{type:"button",onClick:()=>G(!C),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 z-10",children:C?e.jsx($,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]}),a.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{id:"accept-terms",checked:o,onChange:v,className:"flex-shrink-0",hasError:!!a.terms}),e.jsxs(c,{htmlFor:"accept-terms",className:"text-sm text-gray-600 cursor-pointer leading-5 flex-1",children:["I agree to the"," ",e.jsx(p,{to:"/terms",className:"text-gray-900 hover:underline font-medium",children:"Terms of Service"})," ","and"," ",e.jsx(p,{to:"/privacy",className:"text-gray-900 hover:underline font-medium",children:"Privacy Policy"})]})]}),a.terms&&e.jsx("p",{className:"text-sm text-red-600 ml-8",children:a.terms}),e.jsx(S,{type:"submit",disabled:f,className:"w-full bg-gray-900 text-white hover:bg-gray-800 font-medium h-12",children:e.jsx("div",{className:"flex items-center justify-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 animate-spin mr-2"}),e.jsx("span",{children:"Creating account..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Create account"})]})})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(p,{to:"/login",className:"text-gray-700 hover:text-gray-900 font-medium hover:underline",children:"Sign in instead"})})]})]})]})]})})};export{ze as default};
//# sourceMappingURL=Register-C-D1udFi.js.map
