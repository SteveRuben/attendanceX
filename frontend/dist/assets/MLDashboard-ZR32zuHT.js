import{w as B,y as U,j as e,a as D,B as m,U as V}from"./index-gm4XY7Dh.js";import{r as n}from"./vendor-CvUQ7FSA.js";import{C as i,a as l,b as I,c as T}from"./Card-ct0JxCCf.js";import{T as Z,a as _,b as o,c as x}from"./tabs-unnrqVzs.js";import{S as q,a as z,b as F,c as G,d as h}from"./select-byvKiojp.js";import{A as H}from"./AttendancePredictionCard-B0RI0VTX.js";import{I as g,A}from"./InsightsWidget-Cl0kgkMs.js";import{R as W}from"./RecommendationPanel-BRi5PorH.js";import{m as R,T as J}from"./mlService-CJ6D2i2K.js";import{B as f}from"./brain-DppQ7xr_.js";import{R as K}from"./refresh-cw-dQTnxzmC.js";import{T as p}from"./trending-up-CbsLnhxQ.js";import{T as C}from"./triangle-alert-CMRBmGwV.js";import{E as Q}from"./eye-2sExp-ov.js";import{Z as X}from"./zap-BC5YElz6.js";import"./firebase-De9GV7Vy.js";import"./index-TMJn6bF9.js";import"./chevron-down-L5bpcUyJ.js";import"./check-Cx9i6ejF.js";import"./progress-BSuwBYA5.js";import"./info-b7pG8t1m.js";import"./clock-Tx-U9-MC.js";import"./circle-check-big-eEft8Q46.js";import"./alert-dbwOQxjT.js";import"./circle-alert-B-efKsjX.js";import"./arrow-right-BwqWpyzD.js";const Se=()=>{const{user:u}=B(),[s,P]=n.useState(null),[O,N]=n.useState(!0),[c,E]=n.useState("7d"),[L,M]=n.useState("overview");n.useEffect(()=>{v()},[c]);const v=async()=>{var a,r,w,y,b;try{N(!0);const j=new Date,t=new Date;switch(c){case"24h":t.setDate(t.getDate()-1);break;case"7d":t.setDate(t.getDate()-7);break;case"30d":t.setDate(t.getDate()-30);break;case"90d":t.setDate(t.getDate()-90);break}const[d,S]=await Promise.all([R.getMLAnalytics({timeframe:{start:t.toISOString(),end:j.toISOString()}}),R.healthCheck()]);d.success&&S.success&&P({totalPredictions:((a=d.data)==null?void 0:a.totalPredictions)||0,accuracyRate:((r=d.data)==null?void 0:r.accuracyRate)||0,modelUsage:((w=d.data)==null?void 0:w.modelUsage)||{},activeModels:((b=(y=S.data)==null?void 0:y.models)==null?void 0:b.active)||0,anomaliesDetected:12,insightsGenerated:8})}catch(j){console.error("Error loading ML stats:",j),U.error("Erreur lors du chargement des statistiques IA")}finally{N(!1)}},k=a=>({"24h":"Dernières 24h","7d":"7 derniers jours","30d":"30 derniers jours","90d":"90 derniers jours"})[a]||a;return O&&!s?e.jsx("div",{className:"container-fluid py-6",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((a,r)=>e.jsx("div",{className:"h-32 bg-muted rounded"},r))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(4)].map((a,r)=>e.jsx("div",{className:"h-64 bg-muted rounded"},r))})]})}):e.jsxs("div",{className:"container-fluid py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center",children:[e.jsx(f,{className:"w-8 h-8 mr-3 text-primary"}),"Dashboard IA"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Intelligence artificielle et analytics avancés"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(q,{value:c,onValueChange:E,children:[e.jsx(z,{className:"w-[180px]",children:e.jsx(F,{})}),e.jsxs(G,{children:[e.jsx(h,{value:"24h",children:"Dernières 24h"}),e.jsx(h,{value:"7d",children:"7 derniers jours"}),e.jsx(h,{value:"30d",children:"30 derniers jours"}),e.jsx(h,{value:"90d",children:"90 derniers jours"})]})]}),e.jsxs(D,{variant:"outline",onClick:v,children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Actualiser"]})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(i,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Prédictions"}),e.jsx("p",{className:"text-2xl font-bold",children:s.totalPredictions.toLocaleString()})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm",children:e.jsx(m,{variant:"outline",className:"text-xs",children:k(c)})})]})}),e.jsx(i,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Précision IA"}),e.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(s.accuracyRate),"%"]})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(J,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm",children:e.jsx(m,{variant:s.accuracyRate>=80?"default":"secondary",className:"text-xs",children:s.accuracyRate>=80?"Excellente":"Bonne"})})]})}),e.jsx(i,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Modèles Actifs"}),e.jsx("p",{className:"text-2xl font-bold",children:s.activeModels})]}),e.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm",children:e.jsx(m,{variant:"outline",className:"text-xs",children:"Opérationnels"})})]})}),e.jsx(i,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Anomalies"}),e.jsx("p",{className:"text-2xl font-bold",children:s.anomaliesDetected})]}),e.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6 text-red-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm",children:e.jsx(m,{variant:s.anomaliesDetected>5?"destructive":"outline",className:"text-xs",children:s.anomaliesDetected>5?"Attention":"Normal"})})]})})]}),e.jsxs(Z,{value:L,onValueChange:M,className:"space-y-6",children:[e.jsxs(_,{className:"grid w-full grid-cols-4",children:[e.jsxs(o,{value:"overview",className:"flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Vue d'ensemble"]}),e.jsxs(o,{value:"predictions",className:"flex items-center",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Prédictions"]}),e.jsxs(o,{value:"anomalies",className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Anomalies"]}),e.jsxs(o,{value:"insights",className:"flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Insights"]})]}),e.jsxs(x,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(g,{type:"global",timeframe:{start:new Date(Date.now()-7*24*60*60*1e3).toISOString(),end:new Date().toISOString()},maxInsights:3,showTrends:!0,showRecommendations:!0}),e.jsx(A,{type:"attendance",timeframe:{start:new Date(Date.now()-24*60*60*1e3).toISOString(),end:new Date().toISOString()},threshold:.7,autoRefresh:!0,refreshInterval:15})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(W,{type:"global",targetId:"system",maxRecommendations:3,showPriority:!0,showActions:!0}),u&&e.jsxs(i,{children:[e.jsx(I,{children:e.jsxs(T,{className:"flex items-center",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Exemple de Prédiction"]})}),e.jsxs(l,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Voici un exemple de prédiction de présence pour votre profil"}),e.jsx(H,{userId:u.uid,eventId:"example-event",userName:u.displayName||"Utilisateur",compact:!1,showFactors:!0,showRecommendations:!0})]})]})]})]}),e.jsx(x,{value:"predictions",className:"space-y-6",children:e.jsxs(i,{children:[e.jsx(I,{children:e.jsxs(T,{className:"flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"Prédictions de Présence"]})}),e.jsx(l,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prédictions Avancées"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Sélectionnez un événement pour voir les prédictions de présence détaillées"}),e.jsx(D,{variant:"outline",children:"Sélectionner un événement"})]})})]})}),e.jsx(x,{value:"anomalies",className:"space-y-6",children:e.jsx(A,{type:"attendance",timeframe:{start:new Date(Date.now()-7*24*60*60*1e3).toISOString(),end:new Date().toISOString()},threshold:.6,autoRefresh:!1,compact:!1})}),e.jsx(x,{value:"insights",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(g,{type:"global",timeframe:{start:new Date(Date.now()-30*24*60*60*1e3).toISOString(),end:new Date().toISOString()},maxInsights:5,showTrends:!0,showRecommendations:!0,compact:!1}),e.jsx(g,{type:"department",targetId:"engineering",timeframe:{start:new Date(Date.now()-30*24*60*60*1e3).toISOString(),end:new Date().toISOString()},maxInsights:5,showTrends:!0,showRecommendations:!1,compact:!1})]})})]})]})};export{Se as default};
//# sourceMappingURL=MLDashboard-ZR32zuHT.js.map
