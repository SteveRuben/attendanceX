{
  "name": "ðŸ”§ Resolutions",
  "description": "Issue resolution and task management endpoints",
  "item": [
    {
      "name": "Create Resolution for Event",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 201) {",
              "    const data = pm.response.json();",
              "    pm.globals.set('resolutionId', data.data.id);",
              "    pm.test('Resolution created successfully', () => {",
              "        pm.expect(data.success).to.be.true;",
              "        pm.expect(data.data.id).to.be.a('string');",
              "    });",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"title\": \"Fix audio system issues\",\n  \"description\": \"The audio system in the main conference room is not working properly. Participants cannot hear clearly during meetings.\",\n  \"assignedTo\": [\"{{userId}}\"],\n  \"dueDate\": \"2024-12-15T17:00:00Z\",\n  \"priority\": \"high\",\n  \"tags\": [\"audio\", \"conference-room\", \"urgent\"],\n  \"estimatedHours\": 4\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/events/{{eventId}}/resolutions",
          "host": ["{{baseUrl}}"],
          "path": ["events", "{{eventId}}", "resolutions"]
        }
      }
    },
    {
      "name": "Get Event Resolutions",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/events/{{eventId}}/resolutions?status=open&priority=high&limit=20&sortBy=createdAt&sortOrder=desc",
          "host": ["{{baseUrl}}"],
          "path": ["events", "{{eventId}}", "resolutions"],
          "query": [
            { "key": "status", "value": "open" },
            { "key": "priority", "value": "high" },
            { "key": "limit", "value": "20" },
            { "key": "sortBy", "value": "createdAt" },
            { "key": "sortOrder", "value": "desc" }
          ]
        }
      }
    },
    {
      "name": "Get Resolution by ID",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/resolutions/{{resolutionId}}",
          "host": ["{{baseUrl}}"],
          "path": ["resolutions", "{{resolutionId}}"]
        }
      }
    },
    {
      "name": "Update Resolution",
      "request": {
        "method": "PUT",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"title\": \"Fix audio system issues - Updated\",\n  \"description\": \"Updated description: The audio system in the main conference room has been diagnosed. Need to replace the main amplifier.\",\n  \"status\": \"in_progress\",\n  \"priority\": \"medium\",\n  \"progress\": 25,\n  \"actualHours\": 1.5\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/resolutions/{{resolutionId}}",
          "host": ["{{baseUrl}}"],
          "path": ["resolutions", "{{resolutionId}}"]
        }
      }
    },
    {
      "name": "Update Resolution Status",
      "request": {
        "method": "PUT",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"status\": \"completed\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/resolutions/{{resolutionId}}/status",
          "host": ["{{baseUrl}}"],
          "path": ["resolutions", "{{resolutionId}}", "status"]
        }
      }
    },
    {
      "name": "Update Resolution Progress",
      "request": {
        "method": "PUT",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"progress\": 75\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/resolutions/{{resolutionId}}/progress",
          "host": ["{{baseUrl}}"],
          "path": ["resolutions", "{{resolutionId}}", "progress"]
        }
      }
    },
    {
      "name": "Add Comment to Resolution",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"content\": \"I've ordered the replacement amplifier. It should arrive by tomorrow and we can install it in the afternoon.\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/resolutions/{{resolutionId}}/comments",
          "host": ["{{baseUrl}}"],
          "path": ["resolutions", "{{resolutionId}}", "comments"]
        }
      }
    },
    {
      "name": "Get My Tasks",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/resolutions/my-tasks?status=open&priority=high&overdue=false&limit=20&sortBy=dueDate&sortOrder=asc",
          "host": ["{{baseUrl}}"],
          "path": ["resolutions", "my-tasks"],
          "query": [
            { "key": "status", "value": "open" },
            { "key": "priority", "value": "high" },
            { "key": "overdue", "value": "false" },
            { "key": "limit", "value": "20" },
            { "key": "sortBy", "value": "dueDate" },
            { "key": "sortOrder", "value": "asc" }
          ]
        }
      }
    },
    {
      "name": "Get Resolution Stats",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/resolutions/stats?eventId={{eventId}}&period=month",
          "host": ["{{baseUrl}}"],
          "path": ["resolutions", "stats"],
          "query": [
            { "key": "eventId", "value": "{{eventId}}" },
            { "key": "period", "value": "month" }
          ]
        }
      }
    },
    {
      "name": "Delete Resolution",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/resolutions/{{resolutionId}}",
          "host": ["{{baseUrl}}"],
          "path": ["resolutions", "{{resolutionId}}"]
        }
      }
    }
  ]
}