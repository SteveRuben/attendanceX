{
  "name": "üí≥ Stripe Webhooks",
  "description": "Stripe webhook endpoints for payment processing",
  "item": [
    {
      "name": "üîó Webhook Endpoints",
      "item": [
        {
          "name": "Stripe Webhook Handler",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "stripe-signature", "value": "{{stripeSignature}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"evt_test_webhook\",\n  \"object\": \"event\",\n  \"api_version\": \"2020-08-27\",\n  \"created\": 1326853478,\n  \"data\": {\n    \"object\": {\n      \"id\": \"in_test_invoice\",\n      \"object\": \"invoice\",\n      \"status\": \"paid\"\n    }\n  },\n  \"livemode\": false,\n  \"pending_webhooks\": 1,\n  \"request\": {\n    \"id\": \"req_test_request\",\n    \"idempotency_key\": null\n  },\n  \"type\": \"invoice.payment_succeeded\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/billing/stripe/webhook",
              "host": ["{{baseUrl}}"],
              "path": ["billing", "stripe", "webhook"]
            }
          }
        }
      ]
    },
    {
      "name": "üîß Configuration & Testing",
      "item": [
        {
          "name": "Test Stripe Configuration",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/billing/stripe/test",
              "host": ["{{baseUrl}}"],
              "path": ["billing", "stripe", "test"]
            }
          }
        },
        {
          "name": "Get Stripe Public Key",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/billing/stripe/public-key",
              "host": ["{{baseUrl}}"],
              "path": ["billing", "stripe", "public-key"]
            }
          }
        }
      ]
    },
    {
      "name": "üéüÔ∏è Promo Code Integration",
      "item": [
        {
          "name": "Sync Promo Codes with Stripe",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/billing/stripe/sync-promo-codes",
              "host": ["{{baseUrl}}"],
              "path": ["billing", "stripe", "sync-promo-codes"]
            }
          }
        },
        {
          "name": "Apply Promo Code to Stripe Subscription",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tenantId\": \"{{tenantId}}\",\n  \"subscriptionId\": \"{{subscriptionId}}\",\n  \"promoCode\": \"SAVE20\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/billing/stripe/apply-promo-code",
              "host": ["{{baseUrl}}"],
              "path": ["billing", "stripe", "apply-promo-code"]
            }
          }
        },
        {
          "name": "Remove Promo Code from Stripe Subscription",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/billing/stripe/remove-promo-code/{{tenantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["billing", "stripe", "remove-promo-code", "{{tenantId}}"]
            }
          }
        },
        {
          "name": "Get Promo Code Usage Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/billing/stripe/promo-code-stats/{{promoCodeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["billing", "stripe", "promo-code-stats", "{{promoCodeId}}"]
            }
          }
        }
      ]
    }
  ]
}